# Snapshot: Manual Selection Implementation Plan (jaothui-event)
**Date**: 2026-01-09 14:45
**Issue**: #none
**Status**: Ready for Implementation

## üéØ Goal
‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏£‡∏∏‡πà‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏ß‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©" ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏∏‡πà‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏¢‡πÅ‡∏Ñ‡∏£‡∏∞, ‡∏£‡∏∏‡πà‡∏ô‡πÅ‡∏°‡πà‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡πà‡∏á‡∏•‡∏π‡∏Å) ‡πÇ‡∏î‡∏¢‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö Auto Detect ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÑ‡∏ß‡πâ

## üèóÔ∏è Phase 1: Backend (Service Level)
**File**: [src/server/services/event.service.ts](projects/jaothui-event/src/server/services/event.service.ts)
*   **Refactor `getEventTypesWithAutoAssignment`**:
    *   ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Sanity ‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
    *   ‡πÉ‡∏ä‡πâ Regex `/(\d{1,2}) ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:
        *   **Standard Types**: ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏¢‡∏∏ (‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Auto-assign/Suggest)
        *   **Special Types**: ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏´‡∏£‡∏∑‡∏≠ Regex ‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ (‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Manual)
    *   **API Response Structure**:
        ```typescript
        {
          provinceTypes,      // ‡∏£‡∏∏‡πà‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
          nationalTypes,      // ‡∏£‡∏∏‡πà‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®
          specialProvinceTypes, // ‡∏£‡∏∏‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (‡πÉ‡∏´‡∏°‡πà)
          specialNationalTypes, // ‡∏£‡∏∏‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® (‡πÉ‡∏´‡∏°‡πà)
          autoAssignment      // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏î‡∏¥‡∏°)
        }
        ```

## üèóÔ∏è Phase 2: Utils Update
**File**: [src/utils/getPossibleEvents.ts](projects/jaothui-event/src/utils/getPossibleEvents.ts)
*   ‡πÄ‡∏û‡∏¥‡πà‡∏° Utility function `getSpecialEvents` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏á Array ‡∏Ç‡∏≠‡∏á‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà "‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Regex ‡∏≠‡∏≤‡∏¢"

## üèóÔ∏è Phase 3: Frontend UI/UX
**File**: [src/components/Events/Formv3.tsx](projects/jaothui-event/src/components/Events/Formv3.tsx)
*   **State Management**:
    *   ‡πÄ‡∏û‡∏¥‡πà‡∏° `isManualMode`: boolean (Default: `false`)
*   **Logic**:
    *   ‡∏ñ‡πâ‡∏≤ `isManualMode` ‡πÄ‡∏õ‡πá‡∏ô `true` -> ‡πÅ‡∏™‡∏î‡∏á Dropdown ‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏° `specialProvinceTypes` ‡πÅ‡∏•‡∏∞ `specialNationalTypes`
    *   ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Dropdown ‡∏û‡∏¥‡πÄ‡∏®‡∏© -> ‡πÉ‡∏ä‡πâ `setValue` ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ü‡∏¥‡∏•‡∏î‡πå `competitionLevel` ‡πÅ‡∏•‡∏∞ `competitionType` ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
*   **UI Elements**:
    *   ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Auto-detect Preview: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° *"‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏∏‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ?"* (‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° Special Types ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
    *   ‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° Auto Detect ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ (`success: false`) -> ‡πÄ‡∏û‡∏¥‡πà‡∏° Link ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ

## üß™ Phase 4: Verification
*   ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™‡∏õ‡∏Å‡∏ï‡∏¥: ‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
*   ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏™‡∏£‡∏∏‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏¢‡πÅ‡∏Ñ‡∏£‡∏∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏¢‡πÅ‡∏Ñ‡∏£‡∏∞‡∏•‡∏á DB ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
*   ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏™‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÇ‡∏´‡∏°‡∏î Manual ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏≠‡∏á Auto Detect ‡∏£‡∏∏‡πà‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏´‡∏°‡∏î Manual)

---
**Human Confirmation:**
- ‡πÅ‡∏ú‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?
- ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ú‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà Backend (Phase 1) ‡πÄ‡∏•‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
