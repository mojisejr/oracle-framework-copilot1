# Snapshot: Manual Selection Analysis (jaothui-event)
**Date**: 2026-01-09 14:32
**Issue**: #none
**Status**: Planning

## Context
ปัจจุบันระบบ `FormV3` ในโปรเจกต์ `jaothui-event` มีระบบ Auto Detect รุ่นการประกวดตามอายุกระบือ (คำนวณจากวันเกิดถึงวัน Deadline) แต่มีปัญหาว่ารุ่นที่มีเงื่อนไขพิเศษ (Special Classes) ไม่สามารถถูกตรวจจับได้อัตโนมัติ

## Problem Statement
รุ่นที่ไม่สามารถ Detect ได้ในปัจจุบัน:
1. **รุ่นควายแคระ**: ต้องใช้เกณฑ์ส่วนสูง/สายพันธุ์
2. **รุ่นฟันน้ำนม/ฟันแท้**: ต้องใช้การตรวจสภาพร่างกาย (ฟัน)
3. **รุ่นแม่พันธุ์ส่งลูก**: ต้องใช้ข้อมูลความสูงแม่และอายุลูก
4. **รุ่นพิเศษอื่นๆ**: รุ่นที่ Regex ไม่สามารถแกะช่วงอายุ "เดือน" ออกมาได้ (เช่น รุ่นรวมสี, รุ่นภาษาไทยล้วน)

## Discussion Recap
- ระบบปัจจุบันใช้ Regex `/(\d{1,2}) เดือน(?: ถึง (\d{1,2}) เดือน)?/` ซึ่งมองข้ามรุ่นที่ไม่มีคำว่า "เดือน"
- การฝืนทำ Auto Detect สำหรับรุ่นพิเศษอาจทำให้ Logic ซับซ้อนเกินไปและผิดพลาดได้ง่าย
- **Decision**: จะทำระบบ **Manual Selection** เพื่อให้ผู้สมัครสามารถเลือกใช้ (Override) ในกรณีที่รุ่นที่ระบบเลือกให้ไม่ตรงกับความต้องการ หรือต้องการสมัครรุ่นพิเศษ

## Proposed Plan
- [ ] **UI Update**: เพิ่มปุ่มหรือ Checkbox สำหรับ "เลือกรุ่นด้วยตนเอง" หรือแสดงรุ่นพิเศษแยกออกมาจากรุ่นที่ Match ตามอายุ
- [ ] **State Management**: ปรับ `FormV3.tsx` ให้รองรับสถานะ `isManualSelection`
- [ ] **Back-end Support**: ตรวจสอบว่า `getEventTypesWithAutoAssignment` ส่งรุ่นอื่นๆ (ที่ไม่ Match) กลับมาให้เลือกด้วยหรือไม่

## Next Steps
1. ตรวจสอบโค้ดใน `FormV3.tsx` ส่วนที่แสดง Dropdown รุ่นการประกวด
2. ออกแบบ UI ที่จะให้ผู้ใช้สลับโหมดจากการ Auto ไปเป็น Manual
